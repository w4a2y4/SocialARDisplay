<html>
  <head>
  	<script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="wordlist.js"></script>
  </head>
  <body>
    <script>

    const currentTopicID = 0;
    var wordlist = ws[currentTopicID].words;

    var perm = [0, 1, 2];
    shuffle(perm);

    var cnt = 0;

  	var socket = io.connect();
  	$(document).keyup(function (e){

  		// press ID number : the list fade IN 
  		// (only work when there's nothing on the screen)
      for (var i = 1; i < 10; i++) {
        if( e.which === (i+48) ) { 
          var index = perm[cnt];
          console.log( cnt + ", " + index + " " + wordlist[index]);
          socket.emit('start_s', i, wordlist[index]);
          cnt++;
        }
      }

  		// Space = 32
  		if( e.which === 32 ) { socket.emit('distract'); }
      // Y = 89; N = 78
      if( e.which === 78 ) { socket.emit('click_s', 'no'); }
      if( e.which === 89 ) { socket.emit('click_s', 'yes'); }
      

      // press enter : init cnt
      if( e.which === 13 ) {
        socket.emit('init');
        cnt = 0;
      }

  	});

    function shuffle(array) {
      var currentIndex = array.length, temporaryValue, randomIndex;
      while (0 !== currentIndex) {
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }
      return array;
    }

    </script>

    <div>
    This is our server.html file
    press ID number : the list fade IN
    press space : a word fade OUT
    press enter : init cnt
    </div>
  </body>
</html>